doc:
  short_help: "Install the 'conda' package manager"
  help: |
    Install the conda package manager.

    No root permissions are required for this as long as the ``bzip2`` system package is available.
  further_reading:
    "Conda homepage": https://conda.io
  examples:
    - title: install conda package manager
    - title: install conda package manager withoug adding it to PATH
      vars:
        no_add_to_path: true
    - title: install conda package manager, add PATH to custom file
      desc: |
        This adds the short bash snippet that adds 'conda' to the PATH env variable to the file ``$HOME/.init.sh`` instead of ``$HOME/.profile``.
      vars:
        init_files:
          - "{{ ansible_env.HOME }}/.init.sh"

args:
  no_add_to_path:
    required: false
    type: boolean
    doc:
      short_help: "Don't add conda to PATH in init files."
    default: false
    cli:
      is_flag: true
  init_files:
    type: list
    schema: {"type": "string"}
    required: false
    default:
      - "{{ ansible_env.HOME }}/.profile"
    doc:
      short_help: "Files to add a 'PATH=...' directive to."
    cli:
      metavar: PATH

meta:
  tags:
    - featured-frecklecutable
    - conda
    - package-manager
    - package-management
    - install

frecklets:

  - frecklet:
       name: freckfrackery.install-conda
       type: ansible-role
       msg: installing the conda package manager
       desc: |
        Install the [conda](https://conda.io) package manager.
       idempotent: true
       elevated: false
       internet: true
       references:
         "'freckfrackery.install-conda' Ansible role": "https://gitlab.com/freckfrackery/freckfrackery.install-conda"
    vars:
       conda_add_to_path: "{{:: no_add_to_path | negate ::}}"
       conda_add_path_files: "{{:: init_files ::}}"

