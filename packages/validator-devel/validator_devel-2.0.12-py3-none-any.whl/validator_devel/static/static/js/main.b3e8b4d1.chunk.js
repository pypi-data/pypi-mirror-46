(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){e.exports=n(405)},170:function(e,t,n){},394:function(e,t,n){},405:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(31),c=n.n(o),i=n(20),s=n(37),l=n(75),u=n(28),d="SET_QUERY_FILTER",m="CHANGED_QUERY_FILTER",p="SET_FIELD_FILTER",E="MODULE_DATA_REQUEST",f="MODULE_DATA_RECEIVED",h="MODULE_DATA_ERROR";function b(e){return{type:m,query:e}}var O="FIELD_PATH";var R=Object(s.c)({fieldFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.field;default:return e}},queryFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.query;default:return e}},modules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return e;case f:return t.modules;default:return e}},currentDownloadStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{module:null,folders:null,lastError:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PREPARE_FOLDER_REQUEST":case"PREPARE_MODULE_REQUEST":return t.hasOwnProperty("folders")?Object(u.a)({},e,{folders:t.folders,lastError:null}):t.hasOwnProperty("module")?Object(u.a)({},e,{module:t.module,lastError:null}):e;case"PREPARE_FOLDER_ERROR":case"PREPARE_MODULE_ERROR":case"PREPARE_FOLDER_REQUEST_ERROR":case"PREPARE_MODULE_REQUEST_ERROR":return{lastError:t.error,module:null,folders:null};case"PREPARE_FOLDER_RECEIVED":case"PREPARE_MODULE_RECEIVED":return{lastError:null,module:null,folders:null};case"CLEAN_ERROR":return Object(u.a)({},e,{lastError:null});default:return e}}}),g=(n(170),n(22)),y=n(23),v=n(26),_=n(24),j=n(27),w=n(25),k=n(94),x=n.n(k),P=n(3),D=n.n(P),A=n(43),C=n.n(A),q=n(74),L=n.n(q),S=n(143),T=n.n(S),I=n(70),U=n.n(I),N=n(71),M=n.n(N),F=n(72),Q=n.n(F),W=n(51),B=n.n(W),z=n(144),H=n.n(z),V=n(21),Y=n.n(V),G=n(145),J=n.n(G),X=n(73),$=n.n(X),K=n(146),Z=n.n(K),ee=n(147),te=n.n(ee),ne=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.module,r=e.dispatch;return a.a.createElement(U.a,{divider:!0,button:!0,onClick:function(){return window.open("/module/".concat(n.key),"_blank")}},a.a.createElement(M.a,null,a.a.createElement(H.a,{title:n.file_path,placement:"left",classes:{tooltip:t.noMaxWidth}},a.a.createElement(J.a,null))),a.a.createElement(Q.a,{primary:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:t.folderContainer},a.a.createElement(Z.a,{className:t.folderIcon,fontSize:"small"}),n.folders.join("/"))),secondary:a.a.createElement(a.a.Fragment,null,a.a.createElement(Y.a,{component:"span",className:t.inline,color:"textPrimary"},n.filename),n.urn)}),a.a.createElement(B.a,{onClick:function(e){e.stopPropagation(),r({type:"EDIT_MODULE_REQUEST",module_key:n.key}),console.log("Edit module with key: ".concat(n.key))}},a.a.createElement(te.a,null)),a.a.createElement(B.a,{onClick:function(e){e.stopPropagation(),r({type:"PREPARE_MODULE_REQUEST",module_key:n.key}),console.log("Download module with key: ".concat(n.key))}},a.a.createElement($.a,null)))}}]),t}(a.a.Component);ne.PropTypes={moduleId:D.a.string.isRequired};var re=Object(w.withStyles)(function(e){return{noMaxWidth:{maxWidth:"none"},folderContainer:{justifyContent:"center",alignItems:"flex-end"},folderIcon:{margin:0,verticalAlign:"middle",color:"#969696",marginRight:.5*e.spacing.unit}}})(Object(i.b)(function(e,t){var n=T()(e.modules,function(e){return e.key===t.moduleId});if(n<0)throw new Error("Can't find module with ID: ".concat(t.moduleId," in the store."));return{module:e.modules[n]}})(ne)),ae=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.modules;return Array.isArray(n)?a.a.createElement(C.a,{className:t.search_result,elevation:1},a.a.createElement(L.a,{dense:!0,component:"nav"},n.map(function(e){return a.a.createElement(re,{moduleId:e,key:e})}))):a.a.createElement("div",null)}}]),t}(a.a.Component);ae.PropTypes={modules:D.a.arrayOf(D.a.shape({file_path:D.a.string.isRequired,key:D.a.string.isRequired,folders:D.a.array.isRequired,filename:D.a.string.isRequired,code:D.a.string.isRequired,extends:D.a.string.isRequired,urn:D.a.string.isRequired,child_urn:D.a.array.isRequired,child_code:D.a.array.isRequired}).isRequired).isRequired,classes:D.a.object.isRequired,clickHandler:D.a.func.isRequired};var oe=Object(w.withStyles)(function(e){return{search_result:Object(u.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,marginLeft:8*e.spacing.unit,marginRight:8*e.spacing.unit}),noMaxWidth:{maxWidth:"none"}}})(ae),ce=n(148),ie=n.n(ce),se=function(e,t){if(""===t)return{};return ie.a.go(t,e,{limit:30,threshold:-1e4,keys:["file_path","folders_search","urn","code"]}).map(function(e){return e.obj.key})},le=Object(i.b)(function(e){return{modules:se(e.modules,e.queryFilter)}},function(e){return{onSearchCange:function(t){e(b(t))}}})(oe),ue=n(149),de=n.n(ue),me=n(154),pe=n.n(me),Ee=n(151),fe=n.n(Ee),he=n(150),be=n.n(he),Oe=n(152),Re=n.n(Oe),ge=n(153),ye=n.n(ge),ve=n(77);function _e(e,t){return Object(ve.a)(new Set(e.filter(function(e){return e.folders_search.startsWith(t.join("/"))}).filter(function(e){return e.folders.length>t.length}).map(function(e){return e.folders[t.length]}).sort()))}var je=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.subModules,n=e.subFolders,r=e.folders,o=n.map(function(e){return a.a.createElement(xe,{key:[].concat(Object(ve.a)(r),[e]).join("/"),folders:[].concat(Object(ve.a)(r),[e])})}),c=t.map(function(e){return a.a.createElement(re,{moduleId:e.key,key:e.key})});return a.a.createElement(L.a,{dense:!0,component:"div",style:{paddingLeft:16*r.length}},o,c)}}]),t}(a.a.Component),we=Object(i.b)(function(e,t){return{subModules:(n=e.modules,r=t.folders,n.filter(function(e){return e.folders_search===r.join("/")}).sort()),subFolders:_e(e.modules,t.folders)};var n,r})(je),ke=function(e){return{search_result:Object(u.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,marginLeft:8*e.spacing.unit,marginRight:8*e.spacing.unit}),progress:{position:"absolute",top:0,left:0,zIndex:1}}},xe=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(v.a)(this,Object(_.a)(t).call(this,e))).toogleOpen=function(){n.setState(function(e){return{open:!e.open}})},n.state={open:!1},n}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.downloadLoading,r=e.folders,o=e.dispatch;return a.a.createElement("div",null,a.a.createElement(U.a,{divider:!0,button:!0,onClick:this.toogleOpen},a.a.createElement(M.a,null,a.a.createElement(be.a,null)),a.a.createElement(Q.a,{inset:!0,primary:r[r.length-1]}),a.a.createElement(B.a,{disabled:n,onClick:function(e){e.stopPropagation(),o(function(e){return{type:"PREPARE_FOLDER_REQUEST",folders:e}}(r))}},a.a.createElement($.a,null),n&&a.a.createElement(fe.a,{size:50,className:t.progress})),this.state.open?a.a.createElement(Re.a,null):a.a.createElement(ye.a,null)),a.a.createElement(pe.a,{in:this.state.open,timeout:"auto",unmountOnExit:!0},a.a.createElement(we,{folders:r})))}}]),t}(a.a.Component),Pe=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.modules;return Array.isArray(n)?a.a.createElement(C.a,{className:t.search_result,elevation:1},a.a.createElement(we,{folders:[]})):a.a.createElement(C.a,{className:t.search_result,elevation:1},a.a.createElement(Y.a,{variant:"h5"},"No modules."))}}]),t}(a.a.Component);Pe.PropTypes={modules:D.a.arrayOf(D.a.shape({file_path:D.a.string.isRequired,key:D.a.string.isRequired,folders:D.a.array.isRequired,filename:D.a.string.isRequired,code:D.a.string.isRequired,extends:D.a.string.isRequired,urn:D.a.string.isRequired,child_urn:D.a.array.isRequired,child_code:D.a.array.isRequired}).isRequired).isRequired,classes:D.a.object.isRequired,clickHandler:D.a.func.isRequired,layer:D.a.number.isRequired},Pe=Object(w.withStyles)(ke)(Pe),xe=Object(w.withStyles)(ke)(Object(i.b)(function(e,t){return e.currentDownloadStatus.hasOwnProperty("folders")&&Array.isArray(e.currentDownloadStatus.folders)&&de()(e.currentDownloadStatus.folders.join("/"),t.folders.join("/"))?{downloadLoading:!0}:{downloadLoading:!1}})(xe));var De=Object(i.b)(function(e){return{modules:e.modules}},function(e){return{}})(Pe),Ae=n(156),Ce=n.n(Ae),qe=n(157),Le=n.n(qe),Se=n(155),Te=n.n(Se),Ie=n(158),Ue=n.n(Ie),Ne=Object(w.withStyles)(function(e){return{search_box:{marginTop:4*e.spacing.unit,marginBottom:4*e.spacing.unit,width:"100%"}}})(Object(i.b)()(function(e){var t=e.dispatch,n=e.classes;return a.a.createElement(Te.a,{className:n.search_box},a.a.createElement(Ce.a,{id:"search-input",startAdornment:a.a.createElement(Le.a,{position:"start"},a.a.createElement(Ue.a,null)),onChange:function(e){e.preventDefault(),t(b(e.target.value))}}))})),Me=n(95),Fe=n(160),Qe=n.n(Fe),We=n(159),Be=n.n(We),ze=n(76),He=n.n(ze),Ve=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(v.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1},n.handleClose=function(){(0,n.props.dispatch)({type:"CLEAN_ERROR"})},n.errorHeaderMessage=function(){var e=n.props.error;if(null==e)return a.a.createElement("div",null,"No error to display.");var t=e.type.split("."),r=Object(Me.a)(t,2),o=r[0],c=r[1];switch(console.log("CANI CANI CANI",e,o,c),o){case"folder_request":return a.a.createElement(Y.a,{variant:"body1"},"La generazione della cartella ",a.a.createElement("em",null,e.request)," \xe8 fallita");case"module_request":return a.a.createElement(Y.a,{variant:"body1"},"La generazione del modulo ",a.a.createElement("em",null,e.request)," \xe8 fallita");default:return}},n.errorContentMessage=function(){var e=n.props.error;if(null==e)return a.a.createElement("div",null,"No error to display.");var t=e.type.split("."),r=Object(Me.a)(t,2),o=r[0],c=r[1];switch(console.log("CANI CANI CANI",e,o,c),c){case"key_error":return a.a.createElement(Y.a,{variant:"body1"},"Non \xe8 stato trovato un modulo con questo URN: ",a.a.createElement("em",null,e.missing_key));case"template_not_found":return a.a.createElement("div",null,a.a.createElement(Y.a,{variant:"body1"},"Non sono stati trovati template con questi nomi:"),a.a.createElement("ul",null,e.missing_templates.map(function(e){return a.a.createElement("li",null,e)})),a.a.createElement(Y.a,{variant:"body1"},"In genere sono nella prozione ",a.a.createElement("em",null,"extends")," del modulo."));default:return}},n}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.classes;return a.a.createElement("div",null,a.a.createElement(Be.a,{onClose:this.handleClose,"aria-labelledby":"error-dialog",open:null!=t},a.a.createElement(Y.a,{variant:"h4",className:n.dialogContent},"La generazione del modulo \xe8 fallita"),a.a.createElement(He.a,{variant:"middle"}),a.a.createElement("div",{className:n.dialogContent},this.errorHeaderMessage(),this.errorContentMessage()),a.a.createElement(Y.a,{variant:"body1"}),a.a.createElement(He.a,{variant:"middle"}),a.a.createElement("pre",{fontFamily:"Monospace",m:1,className:n.dialogContent},t&&t.stacktrace.join("\n")),a.a.createElement(He.a,{variant:"middle"}),a.a.createElement(Qe.a,{onClick:this.handleClose,color:"primary"},"Close")))}}]),t}(a.a.Component),Ye=Object(i.b)(function(e,t){return null!==e.currentDownloadStatus.lastError?{error:e.currentDownloadStatus.lastError}:{error:null}})(Object(w.withStyles)(function(e){return{dialogContent:{padding:2*e.spacing.unit}}})(Ve)),Ge=(n(394),function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={query:"",queryFilter:"file_path",openModule:!1,moduleTarget:null},n.componentDidMount=function(){return n.props.onLoad()},n}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.query;return a.a.createElement("div",{className:t.root},a.a.createElement(x.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:16,className:t.search_box},a.a.createElement(x.a,{item:!0,xs:8},a.a.createElement(Ne,null))),n?a.a.createElement(le,null):a.a.createElement(De,null),a.a.createElement(Ye,null))}}]),t}(a.a.Component)),Je=Object(w.withStyles)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},search_box:{marginTop:4*e.spacing.unit,marginBottom:4*e.spacing.unit,width:"100%"},search_result:Object(u.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,marginLeft:8*e.spacing.unit,marginRight:8*e.spacing.unit}),module_box:{marginBottom:2*e.spacing.unit},noMaxWidth:{maxWidth:"none"}}})(Object(i.b)(function(e,t){return{query:e.queryFilter}},function(e){return{onLoad:function(){e({type:E})}}})(Ge));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Xe=n(12),$e=n.n(Xe),Ke=n(11),Ze=n(52),et=n.n(Ze),tt=$e.a.mark(st),nt=$e.a.mark(lt),rt=$e.a.mark(dt),at=$e.a.mark(mt),ot=$e.a.mark(pt),ct=$e.a.mark(Et),it=$e.a.mark(ft);function st(e){return $e.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.b)(l.b,500);case 2:return e.type=d,t.next=5,Object(Ke.c)(e);case 5:case"end":return t.stop()}},tt,this)}function lt(){return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.e)(m,st);case 2:case"end":return e.stop()}},nt,this)}function ut(){return et.a.get("/module").then(function(e){return e.body})}function dt(e){var t;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(Ke.d)(E);case 3:return e.prev=3,e.next=6,Object(Ke.b)(ut);case 6:if(t=e.sent){e.next=11;break}return e.next=10,Object(Ke.c)({type:h});case 10:return e.abrupt("continue",0);case 11:return t.map(function(e){return Array.isArray(e.folders)&&(e.folders_search=e.folders.join("/")),e}),e.next=14,Object(Ke.c)({type:f,modules:t});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(3),e.next=20,Object(Ke.c)({type:h});case 20:e.next=0;break;case 22:case"end":return e.stop()}},rt,this,[[3,16]])}function mt(){var e;return $e.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=$e.a.mark(function e(){var t,n,r;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.d)("PREPARE_FOLDER_REQUEST");case 2:return t=e.sent,n=t.folders,e.prev=4,e.next=7,Object(Ke.b)(function(){return et.a.get("/folder/".concat(n.join("-"),"/download")).then(function(e){return e.body})});case 7:if(!(r=e.sent).hasOwnProperty("error")){e.next=13;break}return e.next=11,Object(Ke.c)({type:"PREPARE_FOLDER_ERROR",error:r.error});case 11:e.next=16;break;case 13:return e.next=15,Object(Ke.c)({type:"PREPARE_FOLDER_RECEIVED",response:r});case 15:window.location.href="/download/".concat(r.uuid);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(4),e.next=22,Object(Ke.c)({type:"PREPARE_FOLDER_REQUEST_ERROR",error:e.t0});case 22:case"end":return e.stop()}},e,this,[[4,18]])});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},at,this)}function pt(){var e;return $e.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=$e.a.mark(function e(){var t,n,r;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.d)("PREPARE_MODULE_REQUEST");case 2:return t=e.sent,n=t.module_key,e.prev=4,e.next=7,Object(Ke.b)(function(){return et.a.get("/module/".concat(n,"/download")).then(function(e){return e.body})});case 7:if(!(r=e.sent).hasOwnProperty("error")){e.next=13;break}return e.next=11,Object(Ke.c)({type:"PREPARE_MODULE_ERROR",error:r.error});case 11:e.next=16;break;case 13:return e.next=15,Object(Ke.c)({type:"PREPARE_MODULE_RECEIVED",response:r});case 15:window.location.href="/download/".concat(r.uuid);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(4),e.next=22,Object(Ke.c)({type:"PREPARE_MODULE_REQUEST_ERROR",error:e.t0});case 22:case"end":return e.stop()}},e,this,[[4,18]])});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},ot,this)}function Et(){var e;return $e.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=$e.a.mark(function e(){var t,n;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.d)("EDIT_MODULE_REQUEST");case 2:return t=e.sent,n=t.module_key,e.next=6,Object(Ke.b)(function(){return et.a.get("/module/".concat(n,"/edit")).then(function(e){return e.body})});case 6:case"end":return e.stop()}},e,this)});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},ct,this)}function ft(){return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.a)([mt(),pt(),lt(),dt(),Et()]);case 2:case"end":return e.stop()}},it,this)}var ht=Object(l.a)(),bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,Ot=Object(s.e)(R,bt(Object(s.a)(ht)));ht.run(ft),c.a.render(a.a.createElement(i.a,{store:Ot},a.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[161,2,1]]]);
//# sourceMappingURL=main.b3e8b4d1.chunk.js.map