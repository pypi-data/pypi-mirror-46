(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(42)},34:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(6),l=n.n(o),i=n(11),c=n(4),u=n.n(c),s=n(5),m=n(22),p=n(20),f=n(7),d=n(9),g=n(8),h=n(10),b=n(2),v=(n(34),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={webConnectedToPumps:!1,isPumpConfigSetUp:!1,userEnteredPumpConfiguration:!1,availableConfigurations:[],availableSyringeTypes:[],configurationPath:"",selectedQmixConfig:"",selectedSyringeType:"",userEnteredBubbleToggle:"",pumps:[],selectedPumps:[],activeSubform:"",requestCounter:0,repetitions:{fill:[],empty:[],rinse:[]},targetVolume:{targetVolume:[]},volumeUnit:{targetVolume:"mL"},flowRate:{fill:[],empty:[],bubble:[],rinse:[],targetVolume:[]},flowUnit:{fill:"mL/s",empty:"mL/s",bubble:"mL/s",rinse:"mL/s",targetVolume:"mL/s"},modal:{referenceMove:!1,fill:!1,empty:!1,bubbleCycleStart:!1,bubbleCycleMiddle:!1,bubbleCycleEnd:!1,rinse:!1,locateConfigFiles:!1,noConfigOrDllFound:!1,configDropDownOpen:!1,syringeDropDownOpen:!1}},n.handleConfigNameChange=function(e){return n.setState({selectedQmixConfig:e.target.innerText})},n.handleSyringeTypeChange=function(e){return n.setState({selectedSyringeType:e.target.innerText})},n.handleConfigPathChange=function(e){n.setState({configurationPath:e.target.value}),n.updateAvailableConfigurations(e.target.value)},n.handleLocatingConfig=function(){n.toggle("locateConfigFiles"),n.setState({userEnteredPumpConfiguration:!0})},n.toggle=function(e){var t=n.state.modal;t[e]=!t[e],n.setState({modal:t})},n.handleStateChange=function(e,t,a){n.setState({activeSubform:t});var r=n.state[e];r[t]=a,n.setState(Object(p.a)({},e,r))},n.asyncSetState=function(e){return new Promise(function(t){return n.setState(e,t)})},n.createListOfDetectedPumpIDs=function(){return n.state.pumps.map(function(e){return e.pump_id})},n.handleSelectedPumpList=function(e){var t=n.state.selectedPumps.indexOf(e);t<0?n.state.selectedPumps.push(e):n.state.selectedPumps.splice(t,1),n.setState({selectedPumps:Object(m.a)(n.state.selectedPumps)})},n.getActiveRepetition=function(e){return e.repetitions[e.activeSubform]},n.checkRepetitionInput=function(){var e=n.state.activeSubform;n.state.repetitions[e]<1&&n.handleStateChange("repetitions",e,1)},n.computeConversionFactorOfVolumeUnitToMilliLitres=function(e){var t;switch(e){case"mL":t=1;break;case"cL":t=10;break;default:console.log("An unknown volume unit was used")}return t},n.getActiveTargetVolume=function(e){return e.targetVolume[e.activeSubform]},n.getActiveVolumeUnit=function(e){return e.volumeUnit[e.activeSubform]},n.computeVolumeMilliLitres=function(e){var t=n.getActiveTargetVolume(e),a=n.getActiveVolumeUnit(e);return t*n.computeConversionFactorOfVolumeUnitToMilliLitres(a)},n.computeMaximallyAllowedVolumeUnitAsSpecifiedInForm=function(){if(n.state.selectedPumps.length>0){var e=n.computeSmallestSyringeVolumeMilliLitres(),t=n.getActiveVolumeUnit(n.state);return e/n.computeConversionFactorOfVolumeUnitToMilliLitres(t)}return[]},n.computeSmallestSyringeVolumeMilliLitres=function(){return n.state.selectedPumps.length>0?n.state.pumps.filter(function(e){return n.state.selectedPumps.includes(e.pump_id)}).sort(function(e,t){return t.syringe_volume-e.syringe_volume}).pop().syringe_volume.toString():""},n.checkTargetVolumeInput=function(){var e=n.state.activeSubform;if(n.computeSmallestSyringeVolumeMilliLitres()<n.computeVolumeMilliLitres(n.state)){console.log("Maximum volume exceeded, setting flow rate to maximum allowed value");var t=n.computeMaximallyAllowedVolumeUnitAsSpecifiedInForm();n.handleStateChange("targetVolume",e,t)}n.computeVolumeMilliLitres(n.state)<0&&(console.log("Volume cannot be negative. Setting target volume to zero."),n.handleStateChange("targetVolume",e,0))},n.computeConversionFactorOfFlowUnitToMilliLitres=function(e){var t;switch(e){case"mL/s":t=1;break;case"cL/s":t=10;break;case"mL/min":t=1/60;break;case"cL/min":t=1/6;break;default:console.log("An unknown flow-rate unit was used")}return t},n.computeFlowMilliLitresPerSecond=function(e){var t=e.activeSubform,a=e.flowRate[t],r=e.flowUnit[t];return a*n.computeConversionFactorOfFlowUnitToMilliLitres(r)},n.computeMaximallyAllowedFlowRateMilliLitresPerSecond=function(){return n.state.selectedPumps.length>0?n.state.pumps.filter(function(e){return n.state.selectedPumps.includes(e.pump_id)}).sort(function(e,t){return t.max_flow_rate-e.max_flow_rate}).pop().max_flow_rate:0},n.computeMaximallyAllowedFlowRateUnitAsSpecifiedInForm=function(e){if(n.state.selectedPumps.length>0){var t=n.computeMaximallyAllowedFlowRateMilliLitresPerSecond(),a=n.state.flowUnit[e];return(t/n.computeConversionFactorOfFlowUnitToMilliLitres(a)).toString()}return""},n.checkFlowRateInput=function(){var e=n.state.activeSubform;if(n.computeMaximallyAllowedFlowRateMilliLitresPerSecond()<n.computeFlowMilliLitresPerSecond(n.state)){console.log("Maximum flow rate exceeded, setting flow rate to maximum allowed value");var t=parseFloat(n.computeMaximallyAllowedFlowRateUnitAsSpecifiedInForm(e));n.handleStateChange("flowRate",e,t)}n.computeFlowMilliLitresPerSecond(n.state)<0&&(console.log("Flow rate cannot be negative. Setting flow rate to zero."),n.handleStateChange("flowRate",e,0))},n.handlePumpConfiguration=function(){var e=Object(s.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Is pump configuration set up already?: "+n.state.isPumpConfigSetUp),!1!==n.state.isPumpConfigSetUp){e.next=4;break}return e.next=4,n.getConfigurationInfo();case 4:if(!1!==n.state.isPumpConfigSetUp||!1!==n.state.webConnectedToPumps){e.next=15;break}return console.log("Pump configuration was not set up in the backend. User needs to set it up."),e.next=8,n.getConfigurationInfo();case 8:return n.toggle("locateConfigFiles"),e.next=11,n.waitForConfigFilesToBeSet();case 11:return console.log("The user chose config: "+n.state.selectedQmixConfig+" and syringe type: "+n.state.selectedSyringeType),a={configName:n.state.selectedQmixConfig,syringeType:n.state.selectedSyringeType},e.next=15,fetch("/api/config",{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)});case 15:n.setState({userEnteredPumpConfiguration:!1}),n.handleConnectPumps();case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.getConfigurationInfo=Object(s.a)(u.a.mark(function e(){var t,a,r,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/config",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.next=8,n.asyncSetState({isPumpConfigSetUp:!1});case 8:return e.next=10,n.asyncSetState({availableConfigurations:a.available_configs});case 10:return e.next=12,n.asyncSetState({availableSyringeTypes:a.available_syringes});case 12:return e.next=14,n.asyncSetState({configurationPath:a.configuration_path});case 14:return r=n.state.availableConfigurations[0],e.next=17,n.asyncSetState({selectedQmixConfig:r});case 17:return o=n.state.availableSyringeTypes[0],e.next=20,n.asyncSetState({selectedSyringeType:o});case 20:case"end":return e.stop()}},e,this)})),n.updateAvailableConfigurations=function(){var e=Object(s.a)(u.a.mark(function e(t){var a,r,o,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={configPath:t},e.next=3,fetch("/api/config_update",{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.next=9,n.asyncSetState({availableConfigurations:o.available_configs});case 9:return l=n.state.availableConfigurations[0],e.next=12,n.asyncSetState({selectedQmixConfig:l});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.waitForConfigFilesToBeSet=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,1e3)});case 2:if(!1===n.state.userEnteredPumpConfiguration){e.next=0;break}case 3:case"end":return e.stop()}},e,this)})),n.handleConnectPumps=function(){n.setState({webConnectedToPumps:!n.state.webConnectedToPumps},Object(s.a)(u.a.mark(function e(){var t,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={pumpInitiate:n.state.webConnectedToPumps},console.log("Will try to connect to pumps: "+t.pumpInitiate.toString()),e.next=4,fetch("/api/pumps",{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:if(!(r=e.sent)||!t.pumpInitiate){e.next=15;break}return e.next=11,n.getConfigurationInfo();case 11:return e.next=13,n.getPumpStates();case 13:e.next=16;break;case 15:!1===r&&t.pumpInitiate?(console.log("Pumps were unsuccessfully connected. Make sure all bus connections to the pumps are closed."),n.setState({webConnectedToPumps:!n.state.webConnectedToPumps}),n.setState({selectedPumps:[]}),n.setState({pumps:[]}),n.toggle("noConfigOrDllFound")):!1===t.pumpInitiate&&(n.setState({selectedPumps:[]}),n.setState({pumps:[]}));case 16:case"end":return e.stop()}},e,this)})))},n.deepCopy=function(e){var t=JSON.stringify(e);return JSON.parse(t)},n.handlePumpOperation=function(){var e=Object(s.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/stop",{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({stop:!0})});case 2:return e.next=4,n.asyncSetState({requestCounter:n.state.requestCounter+1});case 4:return e.next=6,n.asyncSetState({activeSubform:t});case 6:a=n.deepCopy(n.state),e.t0=t,e.next="referenceMove"===e.t0?10:"fill"===e.t0?12:"empty"===e.t0?14:"bubble"===e.t0?16:"rinse"===e.t0?18:"targetVolume"===e.t0?20:22;break;case 10:return n.handleReferenceMove(a),e.abrupt("break",23);case 12:return n.handleFill(a),e.abrupt("break",23);case 14:return n.handleEmpty(a),e.abrupt("break",23);case 16:return n.handleBubbleCycle(a),e.abrupt("break",23);case 18:return n.handleRinse(a),e.abrupt("break",23);case 20:return n.handleTargetVolumeChange(a),e.abrupt("break",23);case 22:console.log("An unknown pump operation was initiated");case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleReferenceMove=function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.toggle("referenceMove"),e.next=3,n.sendCommmandToPumps("referenceMove",t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleFill=function(){var e=Object(s.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.toggle("fill"),e.next=3,n.sendCommmandToPumps("fill",t);case 3:a=1;case 4:if(!(a<n.getActiveRepetition(t))){e.next=12;break}return e.next=7,n.sendCommmandToPumps("empty",t);case 7:return e.next=9,n.sendCommmandToPumps("fill",t);case 9:a++,e.next=4;break;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleEmpty=function(){var e=Object(s.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.toggle("empty"),e.next=3,n.sendCommmandToPumps("empty",t);case 3:a=1;case 4:if(!(a<n.getActiveRepetition(t))){e.next=12;break}return e.next=7,n.sendCommmandToPumps("fill",t);case 7:return e.next=9,n.sendCommmandToPumps("empty",t);case 9:a++,e.next=4;break;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.waitBubbleToggle=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,200)});case 2:if(""===n.state.userEnteredBubbleToggle){e.next=0;break}case 3:case"end":return e.stop()}},e,this)})),n.handleBubbleCycleModal=function(e){console.log(e),n.setState({userEnteredBubbleToggle:e})},n.handleBubbleCycle=function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.toggle("bubbleCycleStart"),e.next=3,n.sendCommmandToPumps("fillToOneThird",t);case 3:return e.next=5,n.waitForPumpingToFinish();case 5:if(t.requestCounter!==n.state.requestCounter){e.next=11;break}return n.toggle("bubbleCycleMiddle"),e.next=9,n.waitBubbleToggle();case 9:n.toggle("bubbleCycleMiddle"),"cancel"===n.state.userEnteredBubbleToggle?n.setState({userEnteredBubbleToggle:""}):"continue"===n.state.userEnteredBubbleToggle&&(n.setState({userEnteredBubbleToggle:""}),n.handleBubbleCycleMiddle(t));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleBubbleCycleMiddle=function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.sendCommmandToPumps("fillToTwoThird",t);case 2:return e.next=4,n.sendCommmandToPumps("empty",t);case 4:return e.next=6,n.waitForPumpingToFinish();case 6:if(t.requestCounter!==n.state.requestCounter){e.next=12;break}return n.toggle("bubbleCycleEnd"),e.next=10,n.waitBubbleToggle();case 10:n.toggle("bubbleCycleEnd"),"cancel"===n.state.userEnteredBubbleToggle?n.setState({userEnteredBubbleToggle:""}):"continue"===n.state.userEnteredBubbleToggle&&(n.setState({userEnteredBubbleToggle:""}),n.handleBubbleCycleEnd(t));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleBubbleCycleEnd=function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.sendCommmandToPumps("fill",t);case 2:return e.next=4,n.sendCommmandToPumps("empty",t);case 4:return e.next=6,n.sendCommmandToPumps("fill",t);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleRinse=function(){var e=Object(s.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.toggle("rinse"),a=0;case 2:if(!(a<n.getActiveRepetition(t))){e.next=12;break}return e.next=5,n.sendCommmandToPumps("empty",t);case 5:return e.next=7,n.sendCommmandToPumps("fill",t);case 7:return e.next=9,n.sendCommmandToPumps("empty",t);case 9:a++,e.next=2;break;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleTargetVolumeChange=function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.sendCommmandToPumps("fillToLevel",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.sendCommmandToPumps=function(){var e=Object(s.a)(u.a.mark(function e(t,a){var r,o,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.webConnectedToPumps){e.next=14;break}return e.next=3,n.waitForPumpingToFinish();case 3:if(a.requestCounter!==n.state.requestCounter){e.next=14;break}e.t0=u.a.keys(a.selectedPumps);case 5:if((e.t1=e.t0()).done){e.next=14;break}return r=e.t1.value,o=a.selectedPumps[r],e.next=10,n.makePumpCommand(t,o,a);case 10:l=e.sent,n.state.webConnectedToPumps&&fetch("/api/pumps/"+o.toString(),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(l)}),e.next=5;break;case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.makePumpCommand=function(){var e=Object(s.a)(u.a.mark(function e(t,a,r){var o,l,i,c,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"referenceMove"===t?l={action:t}:"fillToLevel"!==t&&"fill"!==t&&"empty"!==t&&"fillToOneThird"!==t&&"fillToTwoThird"!==t||("fillToLevel"===t?o=n.computeVolumeMilliLitres(r):"empty"===t?o=0:"fill"===t?o=r.pumps[a].syringe_volume:"fillToOneThird"===t?(i=r.pumps.find(function(e){return e.pump_id===a}),o=1*i.syringe_volume/3):"fillToTwoThird"===t&&(c=r.pumps.find(function(e){return e.pump_id===a}),o=2*c.syringe_volume/3),s=n.computeFlowMilliLitresPerSecond(r),l={action:t,params:{targetVolume:o,flowRate:s}}),e.abrupt("return",l);case 2:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.waitForPumpingToFinish=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPumpStates();case 2:return console.log("Checking whether pumps are still pumping"),e.next=5,n.getPumpStates();case 5:return e.next=7,new Promise(function(e){return setTimeout(e,1e3)});case 7:if(n.state.pumps.some(function(e){return e.is_pumping})){e.next=2;break}case 8:case"end":return e.stop()}},e,this)})),n.getPumpStates=Object(s.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/pumps",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,console.log("Current pump state:"),console.log(a),e.next=10,n.asyncSetState({pumps:a.pump_states});case 10:case"end":return e.stop()}},e,this)})),n.getPumpState=function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/pumps/"+t.toString(),{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.render=function(){return r.a.createElement("div",{className:"pump-form"},r.a.createElement("div",{className:"button-group"},r.a.createElement(b.a,{color:"success",onClick:n.handlePumpConfiguration},n.state.webConnectedToPumps?"Stop and Disconnect Pumps":"Detect Pumps"),r.a.createElement(b.k,{isOpen:n.state.modal.locateConfigFiles,className:"modal-input"},r.a.createElement(b.n,null,"Select a pump configuration"),r.a.createElement(b.n,null,r.a.createElement(b.g,{method:"post",onSubmit:function(e){e.preventDefault()}},r.a.createElement("form",null,r.a.createElement("div",{class:"form-row"},r.a.createElement("div",{class:"col"},r.a.createElement("h6",null,"Configuration directory:"),r.a.createElement(b.h,null,r.a.createElement("input",{type:"text",className:"form-control",onChange:n.handleConfigPathChange,placeholder:n.state.configurationPath}))),r.a.createElement("div",{className:"col"},r.a.createElement("h6",null,"Select configuration:"),r.a.createElement(b.h,null,r.a.createElement(b.c,{isOpen:n.state.modal.configDropDownOpen,toggle:function(){return n.toggle("configDropDownOpen")}},r.a.createElement(b.f,{caret:!0},n.state.selectedQmixConfig),r.a.createElement(b.e,null,n.state.availableConfigurations.map(function(e){return r.a.createElement(b.d,{key:e,onClick:n.handleConfigNameChange},e)}))))))),r.a.createElement(b.h,null,r.a.createElement("h6",null,"Select syringe type:"),r.a.createElement(b.c,{isOpen:n.state.modal.syringeDropDownOpen,toggle:function(){return n.toggle("syringeDropDownOpen")}},r.a.createElement(b.f,{caret:!0},n.state.selectedSyringeType),r.a.createElement(b.e,null,n.state.availableSyringeTypes.map(function(e){return r.a.createElement(b.d,{key:e,onClick:n.handleSyringeTypeChange},e)})))))),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",disabled:0===n.state.availableConfigurations.length,onClick:n.handleLocatingConfig}," Continue "),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.toggle("locateConfigFiles")}}," Cancel "))),r.a.createElement(b.k,{isOpen:n.state.modal.noConfigOrDllFound,className:"modal-input"},r.a.createElement(b.n,null,"Error - no pumps were detected."),r.a.createElement(b.l,null,"Ensure that:",r.a.createElement("ul",null,r.a.createElement("li",null,"You followed the gustometer installation ",r.a.createElement("a",{href:"https://github.com/psyfood/pyqmix#gustometer-setup"},"instructions.")),r.a.createElement("li",null,"That you selected a valid pump configuration."),r.a.createElement("li",null,"That the pumps are powered on and connected to the computer."),r.a.createElement("li",null,"That the bus is not in use by another program, for example QmixElements."),r.a.createElement("li",null,"If the above approaches are unsuccessful, then try adding the directory of the Qmix SDK DLL's to the Windows path variable.")),"Then try again."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.toggle("noConfigOrDllFound")}}," OK ")))),r.a.createElement("div",{className:"button-group"},r.a.createElement(b.b,null,n.createListOfDetectedPumpIDs().map(function(e){return r.a.createElement(b.a,{color:"primary",key:e,onClick:function(){return n.handleSelectedPumpList(e)},active:n.state.selectedPumps.includes(e)},"Pump "+e.toString())}))),r.a.createElement("div",{className:"entire-input-form"},r.a.createElement(b.g,{method:"post",onSubmit:function(e){e.preventDefault(),n.toggle("referenceMove")}},r.a.createElement(b.h,{className:"input-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3 input-subform button-subform"},r.a.createElement(b.a,{color:"success",disabled:0===n.state.selectedPumps.length}," Reference Move "),r.a.createElement(b.i,null,"Calibrate the selected pumps."),r.a.createElement(b.k,{isOpen:n.state.modal.referenceMove,className:"modal-input"},r.a.createElement(b.n,null,"Reference Move"),r.a.createElement(b.l,null,"Detach all syringes from the pumps before continuing."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.handlePumpOperation("referenceMove")}}," Continue "),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.toggle("referenceMove")}}," Cancel ")))),r.a.createElement("div",{className:"col-sm-3"}),r.a.createElement("div",{className:"col-sm-3"}),r.a.createElement("div",{className:"col-sm-3"})))),r.a.createElement(b.g,{method:"post",onSubmit:function(e){e.preventDefault(),n.toggle("fill")}},r.a.createElement(b.h,{className:"input-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3 input-subform button-subform"},r.a.createElement(b.a,{color:"success",disabled:0===n.state.selectedPumps.length}," Fill Cycle "),r.a.createElement(b.i,null,"Fill & empty the syringe multiple times. Ends with a filled syringe."),r.a.createElement(b.k,{isOpen:n.state.modal.fill,className:"modal-input"},r.a.createElement(b.n,null,"Fill"),r.a.createElement(b.l,null,"Insert the inlet tube into the stimulus reservoir and detach the spray head if repeating the fill procedure."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.handlePumpOperation("fill")}}," Continue"),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.toggle("fill")}}," Cancel")))),r.a.createElement("div",{className:"col-sm-3 input-subform nrep-subform"},r.a.createElement(b.j,{type:"number",className:"foo",value:n.state.repetitions.fill,name:"repetitions",min:"1",placeholder:"No. of repetitions.",onChange:function(e){return n.handleStateChange("repetitions","fill",e.target.value)},onBlur:function(){return n.checkRepetitionInput()},required:!0})),r.a.createElement("div",{className:"col-sm-3 input-subform volume-subform"}),r.a.createElement("div",{className:"col-sm-3 input-subform flowrate-subform"},r.a.createElement(b.j,{type:"number",value:n.state.flowRate.fill,pattern:"\\d+((\\.)\\d+)?",step:"any",name:"flowRate",min:"0",max:n.computeMaximallyAllowedFlowRateUnitAsSpecifiedInForm("fill"),placeholder:"Flow rate.",onChange:function(e){return n.handleStateChange("flowRate","fill",e.target.value)},onBlur:function(){return n.checkFlowRateInput()},required:!0}),r.a.createElement(b.j,{type:"select",name:"flowUnit",defaultValue:n.state.flowUnit.fill,onBlur:function(){return n.checkFlowRateInput()},onChange:function(e){return n.handleStateChange("flowUnit","fill",e.target.value)}},r.a.createElement("option",{value:"mL/s"},"mL/s"),r.a.createElement("option",{value:"mL/min"},"mL/min"),r.a.createElement("option",{value:"cL/s"},"cL/s"),r.a.createElement("option",{value:"cL/min"},"cL/min")))))),r.a.createElement(b.g,{method:"post",onSubmit:function(e){e.preventDefault(),n.toggle("empty")}},r.a.createElement(b.h,{className:"input-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3 input-subform button-subform"},r.a.createElement(b.a,{color:"success",disabled:0===n.state.selectedPumps.length}," Empty Cycle "),r.a.createElement(b.i,null,"Empty & fill the syringe multiple times. Ends with an empty syringe."),r.a.createElement(b.k,{isOpen:n.state.modal.empty,className:"modal-input"},r.a.createElement(b.n,null,"Empty"),r.a.createElement(b.l,null,"Remove the inlet tube from the stimulus reservoir and detach the spray head from the mouthpiece."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.handlePumpOperation("empty")}}," Continue "),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.toggle("empty")}}," Cancel ")))),r.a.createElement("div",{className:"col-sm-3 input-subform nrep-subform"},r.a.createElement(b.j,{type:"number",value:n.state.repetitions.empty,name:"repetitions",min:"1",placeholder:"No. of repetitions.",onChange:function(e){return n.handleStateChange("repetitions","empty",e.target.value)},onBlur:function(){return n.checkRepetitionInput()},required:!0})),r.a.createElement("div",{className:"col-sm-3 input-subform volume-subform"}),r.a.createElement("div",{className:"col-sm-3 input-subform flowrate-subform"},r.a.createElement(b.j,{type:"number",value:n.state.flowRate.empty,pattern:"\\d+((\\.)\\d+)?",step:"any",name:"flowRate",min:"0",max:n.computeMaximallyAllowedFlowRateUnitAsSpecifiedInForm("empty"),placeholder:"Flow rate.",onChange:function(e){return n.handleStateChange("flowRate","empty",e.target.value)},onBlur:function(){return n.checkFlowRateInput()},required:!0}),r.a.createElement(b.j,{type:"select",name:"flowUnit",defaultValue:n.state.flowUnit.empty,onBlur:function(){return n.checkFlowRateInput()},onChange:function(e){return n.handleStateChange("flowUnit","empty",e.target.value)}},r.a.createElement("option",{value:"mL/s"},"mL/s"),r.a.createElement("option",{value:"mL/min"},"mL/min"),r.a.createElement("option",{value:"cL/s"},"cL/s"),r.a.createElement("option",{value:"cL/min"},"cL/min")))))),r.a.createElement(b.g,{method:"post",onSubmit:function(e){e.preventDefault(),n.toggle("bubbleCycleStart")}},r.a.createElement(b.h,{className:"input-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3 input-subform button-subform"},r.a.createElement(b.a,{color:"success",disabled:0===n.state.selectedPumps.length}," Bubble Cycle "),r.a.createElement(b.i,null,"Guided procedure to remove air bubbles trapped in the syringe. Ends with a filled syringe."),r.a.createElement(b.k,{isOpen:n.state.modal.bubbleCycleStart,className:"modal-input"},r.a.createElement(b.n,null,"Bubble Cycle"),r.a.createElement(b.l,null,"Insert the inlet tube into the stimulus reservoir."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.handlePumpOperation("bubble")}}," Continue "),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.toggle("bubbleCycleStart")}}," Cancel "))),r.a.createElement(b.k,{isOpen:n.state.modal.bubbleCycleMiddle,className:"modal-input"},r.a.createElement(b.n,null,"Bubble Cycle"),r.a.createElement(b.l,null,"Remove the inlet tube from the stimulus reservoir to aspirate air."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.handleBubbleCycleModal("continue")}}," Continue"),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.handleBubbleCycleModal("cancel")}}," Cancel"))),r.a.createElement(b.k,{isOpen:n.state.modal.bubbleCycleEnd,className:"modal-input"},r.a.createElement(b.n,null,"Bubble Cycle"),r.a.createElement(b.l,null,"Insert the inlet tube into the stimulus reservoir. This is the final step in the Bubble Cycle procedure."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.handleBubbleCycleModal("continue")}}," Continue "),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.handleBubbleCycleModal("cancel")}}," Cancel ")))),r.a.createElement("div",{className:"col-sm-3 input-subform nrep-subform"}),r.a.createElement("div",{className:"col-sm-3 input-subform volume-subform"}),r.a.createElement("div",{className:"col-sm-3 input-subform flowrate-subform"},r.a.createElement(b.j,{type:"number",value:n.state.flowRate.bubble,pattern:"\\d+((\\.)\\d+)?",step:"any",name:"flowRate",min:"0",max:n.computeMaximallyAllowedFlowRateUnitAsSpecifiedInForm("bubble"),placeholder:"Flow rate.",onChange:function(e){return n.handleStateChange("flowRate","bubble",e.target.value)},onBlur:function(){return n.checkFlowRateInput()},required:!0}),r.a.createElement(b.j,{type:"select",name:"flowUnit",defaultValue:n.state.flowUnit.bubbleCycle,onBlur:function(){return n.checkFlowRateInput()},onChange:function(e){return n.handleStateChange("flowUnit","bubble",e.target.value)}},r.a.createElement("option",{value:"mL/s"},"mL/s"),r.a.createElement("option",{value:"mL/min"},"mL/min"),r.a.createElement("option",{value:"cL/s"},"cL/s"),r.a.createElement("option",{value:"cL/min"},"cL/min")))))),r.a.createElement(b.g,{method:"post",onSubmit:function(e){e.preventDefault(),n.toggle("rinse")}},r.a.createElement(b.h,{className:"input-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3 input-subform button-subform"},r.a.createElement(b.a,{color:"success",disabled:0===n.state.selectedPumps.length}," Rinse Cycle "),r.a.createElement(b.i,null,"Empty & fill the syringe multiple times. Ends with an empty syringe."),r.a.createElement(b.k,{isOpen:n.state.modal.rinse,className:"modal-input"},r.a.createElement(b.n,null,"Rinse"),r.a.createElement(b.l,null,"Insert the inlet tube into the rinsing fluid and detach the spray head from the mouthpiece."),r.a.createElement(b.m,null,r.a.createElement(b.a,{color:"success",onClick:function(){return n.handlePumpOperation("rinse")}}," Continue "),r.a.createElement(b.a,{color:"danger",onClick:function(){return n.toggle("rinse")}}," Cancel")))),r.a.createElement("div",{className:"col-sm-3 input-subform nrep-subform"},r.a.createElement(b.j,{type:"number",value:n.state.repetitions.rinse,name:"repetitions",min:"1",placeholder:"No. of repetitions.",onChange:function(e){return n.handleStateChange("repetitions","rinse",e.target.value)},onBlur:function(){return n.checkRepetitionInput()},required:!0})),r.a.createElement("div",{className:"col-sm-3 input-subform volume-subform"}),r.a.createElement("div",{className:"col-sm-3 input-subform flowrate-subform"},r.a.createElement(b.j,{type:"number",value:n.state.flowRate.rinse,pattern:"\\d+((\\.)\\d+)?",step:"any",name:"flowRate",min:"0",max:n.computeMaximallyAllowedFlowRateUnitAsSpecifiedInForm("rinse"),placeholder:"Flow rate.",onBlur:function(){return n.checkFlowRateInput()},onChange:function(e){return n.handleStateChange("flowRate","rinse",e.target.value)},required:!0}),r.a.createElement(b.j,{type:"select",name:"flowUnit",defaultValue:n.state.flowUnit.rinse,onBlur:function(){return n.checkFlowRateInput()},onChange:function(e){return n.handleStateChange("flowUnit","rinse",e.target.value)}},r.a.createElement("option",{value:"mL/s"},"mL/s"),r.a.createElement("option",{value:"mL/min"},"mL/min"),r.a.createElement("option",{value:"cL/s"},"cL/s"),r.a.createElement("option",{value:"cL/min"},"cL/min")))))),r.a.createElement(b.g,{method:"post",onSubmit:function(e){e.preventDefault(),n.handlePumpOperation("targetVolume")}},r.a.createElement(b.h,{className:"input-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3 input-subform button-subform"},r.a.createElement(b.a,{color:"success",disabled:0===n.state.selectedPumps.length}," Target Volume "),r.a.createElement(b.i,null,"Set target volume of a syringe.")),r.a.createElement("div",{className:"col-sm-3 input-subform nrep-subform"}),r.a.createElement("div",{className:"col-sm-3 input-subform volume-subform"},r.a.createElement(b.j,{type:"number",value:n.state.targetVolume.targetVolume,pattern:"\\d+((\\.)\\d+)?",step:"any",name:"targetVolume",min:"0",max:n.computeSmallestSyringeVolumeMilliLitres("targetVolume"),placeholder:"Target volume.",onChange:function(e){return n.handleStateChange("targetVolume","targetVolume",e.target.value)},onBlur:function(){return n.checkTargetVolumeInput()},required:!0}),r.a.createElement(b.j,{type:"select",name:"flowUnit",defaultValue:n.state.volumeUnit.targetVolume,onBlur:function(){return n.checkTargetVolumeInput()},onChange:function(e){return n.handleStateChange("volumeUnit","targetVolume",e.target.value)}},r.a.createElement("option",{value:"mL"},"mL"),r.a.createElement("option",{value:"cL"},"cL"))),r.a.createElement("div",{className:"col-sm-3 input-subform flowrate-subform"},r.a.createElement(b.j,{type:"number",value:n.state.flowRate.targetVolume,pattern:"\\d+((\\.)\\d+)?",step:"any",name:"flowRate",min:"0",max:n.computeMaximallyAllowedFlowRateUnitAsSpecifiedInForm("targetVolume"),placeholder:"Flow rate.",onChange:function(e){return n.handleStateChange("flowRate","targetVolume",e.target.value)},onBlur:function(){return n.checkFlowRateInput()},required:!0}),r.a.createElement(b.j,{type:"select",name:"flowUnit",defaultValue:n.state.flowUnit.targetVolume,onBlur:function(){return n.checkFlowRateInput()},onChange:function(e){return n.handleStateChange("flowUnit","targetVolume",e.target.value)}},r.a.createElement("option",{value:"mL/s"},"mL/s"),r.a.createElement("option",{value:"mL/min"},"mL/min"),r.a.createElement("option",{value:"cL/s"},"cL/s"),r.a.createElement("option",{value:"cL/min"},"cL/min"))))))))},n}return Object(h.a)(t,e),t}(a.Component)),y=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={pyqmixVersion:""},n.getPyqmixVersion=Object(s.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/pyqmix",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0="unknown";case 10:a=e.t0,n.setState({pyqmixVersion:a});case 12:case"end":return e.stop()}},e,this)})),n.render=function(){return r.a.createElement("p",null,"pyqmix version ",n.state.pyqmixVersion)},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getPyqmixVersion()}}]),t}(a.Component),w=function(e){function t(){return Object(f.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-title"},"pyqmix-web")),r.a.createElement("div",{className:"entire-pump-form"},r.a.createElement(v,null)),r.a.createElement("div",{className:"outro entire-pump-form"},r.a.createElement(y,null)))}}]),t}(a.Component),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(38),n(40);l.a.render(r.a.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/pyqmix-web",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/pyqmix-web","/service-worker.js");C?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):E(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):E(e)})}}()}},[[23,2,1]]]);
//# sourceMappingURL=main.e6990cdc.chunk.js.map